<!--users/templates/users/register.html-->

{% extends 'base.html' %}

{% block content %}

<div class="column">
	<div class="box">
	<h2 class="label is-large">Sign Up</h2>
		</br>
		<form method="post">
			{% csrf_token %}
			{% if form.non_field_errors  %}
				<div class="notification is-danger">
				  <button class="delete"></button>
					{{ form.non_field_errors  }}
				  </div>
			{% endif %}
			{% for field in form %}
				<div class="field">
					<label class="label is-medium">{{ field.label_tag }}</label>
					{% if field.errors %}
						<div class="notification is-danger">
						  <button class="delete"></button>
							{{ field.errors}}
						  </div>
						</div>
					{% endif %}
					 <div class="control has-icons-left has-icons-right">
						{{ field }}
					  </div>
					 
				</div>
			{% endfor %}
			<input class="button is-link is-focused" type="submit" value="Register">
		</form>
		<div class = "box">
			<a href="{% url 'users:login' %}">Back to login</a>
		<div class="box">
	</div>
</div>

<script>
  // Show/hide error message divs
  const deleteButtons = document.querySelectorAll('.delete');
  for (let i = 0; i < deleteButtons.length; i++) {
    const button = deleteButtons[i];
    const notification = button.parentNode;
    button.addEventListener('click', () => {
      notification.style.display = 'none';
    });
  }
</script>

{% endblock %}